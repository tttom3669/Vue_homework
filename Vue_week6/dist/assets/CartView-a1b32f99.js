import{S as i}from"./sweetalert2.all-3e6723c9.js";import{_ as m,r as f,o as r,c,a as x,d as t,F as _,e as b,f as I,t as n,g as V,v}from"./index-5fac9801.js";const{VITE_APP_URL:u,VITE_APP_PATH:p}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/V2",VITE_APP_PATH:"tttom3669",BASE_URL:"/Vue_homework/Vue_week6/dist/",MODE:"production",DEV:!1,PROD:!0},L={data(){return{cart:{},isLoading:!1,loadingStatus:{loadingItem:""},fullPage:!0}},methods:{getCarts(){this.$http.get(`${u}/api/${p}/cart`).then(s=>{this.cart=s.data.data,this.isLoading=!1}).catch(s=>{this.isLoading=!1,i.fire({icon:"error",title:`${s.response.data.message}`})})},updateCartItem(s){this.isLoading=!0;const o={product_id:s.product.id,qty:s.qty};this.loadingStatus.loadingItem=s.id,this.$http.put(`${u}/api/${p}/cart/${s.id}`,{data:o}).then(d=>{this.getCarts(),i.fire({icon:"success",title:`${d.data.message}`}),this.loadingStatus.loadingItem=""}).catch(d=>{i.fire({icon:"error",title:`${d.response.data.message}`})})},deleteItem(s){this.isLoading=!0,this.loadingStatus={loadingItem:s.id,loadingType:"deleteItem"},this.$http.delete(`${u}/api/${p}/cart/${s.id}`).then(o=>{this.getCarts(),i.fire({icon:"success",title:`${o.data.message}`}),this.loadingStatus.loadingItem=""}).catch(o=>{i.fire({icon:"error",title:`${o.response.data.message}`})})}},mounted(){this.isLoading=!0,this.getCarts()}},P=t("div",null,"購物車頁面",-1),y={class:"table align-middle"},C=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",{class:"text-center"},"單價"),t("th",{class:"text-center"},"小計")])],-1),S=["onClick","disabled"],$={class:"input-group input-group-sm"},k={class:"input-group mb-3"},E=["onUpdate:modelValue","onBlur","disabled"],T={class:"input-group-text",id:"basic-addon2"},A={class:"text-center"},w={class:"text-end"},B=t("td",{colspan:"4",class:"text-end"},"總計",-1),U={class:"text-end"},D=t("td",{colspan:"4",class:"text-end text-success"},"折扣價",-1),q={class:"text-end text-success"};function R(s,o,d,N,a,h){const g=f("VueLoading");return r(),c(_,null,[P,x(g,{active:a.isLoading,"onUpdate:active":o[0]||(o[0]=e=>a.isLoading=e),"is-full-page":a.fullPage},null,8,["active","is-full-page"]),t("table",y,[C,t("tbody",null,[a.cart.carts?(r(!0),c(_,{key:0},b(a.cart.carts,e=>(r(),c("tr",{key:e.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:l=>h.deleteItem(e),disabled:a.loadingStatus.loadingItem===e.id}," x ",8,S)]),t("td",null,n(e.product.title),1),t("td",null,[t("div",$,[t("div",k,[V(t("input",{min:"1",type:"number",class:"form-control","onUpdate:modelValue":l=>e.qty=l,onBlur:l=>h.updateCartItem(e),disabled:a.loadingStatus.loadingItem===e.id},null,40,E),[[v,e.qty,void 0,{number:!0}]]),t("span",T,n(e.product.unit),1)])])]),t("td",A,n(e.product.price),1),t("td",w,n(e.total),1)]))),128)):I("",!0)]),t("tfoot",null,[t("tr",null,[B,t("td",U,n(a.cart.total),1)]),t("tr",null,[D,t("td",q,n(a.cart.final_total),1)])])])],64)}const M=m(L,[["render",R]]);export{M as default};
